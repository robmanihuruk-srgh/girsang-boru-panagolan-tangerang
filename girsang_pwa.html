<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèõÔ∏è Girsang Boru Panagolan Tangerang - Management System</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:#f8f9fa;}
        .header{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:20px;text-align:center;box-shadow:0 2px 10px rgba(0,0,0,0.1);}
        .header h1{font-size:28px;margin:0;font-weight:300;}
        .header p{font-size:16px;opacity:0.9;}
        .navbar{background:#fff;padding:15px;box-shadow:0 2px 5px rgba(0,0,0,0.1);position:sticky;top:0;z-index:100;}
        .nav-links{display:flex;justify-content:center;gap:30px;flex-wrap:wrap;}
        .nav-links a{color:#495057;text-decoration:none;font-weight:500;padding:8px 16px;border-radius:20px;transition:all 0.3s;cursor:pointer;}
        .nav-links a:hover,.nav-links a.active{background:#667eea;color:white;}
        .container{max-width:1400px;margin:20px auto;padding:0 20px;}
        .stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:20px 0;}
        .stat-card{background:white;padding:25px;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,0.08);text-align:center;}
        .stat-number{font-size:36px;font-weight:bold;color:#667eea;}
        .stat-label{color:#666;font-size:14px;}
        .section{background:white;margin:20px 0;border-radius:15px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,0.08);display:none;}
        .section.active{display:block;}
        .section-header{padding:25px;background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:white;}
        .section-content{padding:25px;}
        .form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;}
        input,select,textarea{width:100%;padding:12px;border:2px solid #e9ecef;border-radius:8px;font-size:16px;transition:border-color 0.3s;}
        input:focus,select:focus,textarea:focus{outline:none;border-color:#667eea;}
        .btn{padding:12px 24px;border:none;border-radius:8px;cursor:pointer;font-size:16px;font-weight:500;transition:all 0.3s;margin:5px;}
        .btn-primary{background:#28a745;color:white;}
        .btn-primary:hover{background:#218838;}
        .btn-danger{background:#dc3545;color:white;}
        .btn-danger:hover{background:#c82333;}
        .btn-secondary{background:#6c757d;color:white;}
        table{width:100%;border-collapse:collapse;margin:20px 0;}
        th{padding:15px;background:#667eea;color:white;text-align:left;font-weight:500;}
        td{padding:15px;border-bottom:1px solid #e9ecef;}
        tr:hover{background:#f8f9fa;}
        .status-badge{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:500;}
        .status-aktif{background:#d4edda;color:#155724;}
        .status-nonaktif{background:#f8d7da;color:#721c24;}
        .login-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:1000;}
        .login-box{background:white;padding:40px;border-radius:15px;width:100%;max-width:400px;}
        .close-btn{position:absolute;top:20px;right:20px;background:#dc3545;color:white;padding:10px 15px;border-radius:50%;cursor:pointer;font-size:20px;}
        @media(max-width:768px){.form-grid{grid-template-columns:1fr;}.nav-links{gap:10px;font-size:14px;}}
    </style>
</head>
<body>
    <!-- Login Overlay -->
    <div id="loginOverlay" class="login-overlay">
        <div class="login-box">
            <div style="text-align:center;margin-bottom:30px;">
                <h1 style="color:#667eea;font-size:28px;margin:0;">üèõÔ∏è Girsang Boru Panagolan</h1>
                <p style="color:#666;margin:5px 0 0 0;">Sistem Informasi Manajemen Tangerang</p>
            </div>
            <input type="text" id="username" placeholder="Username" value="admin">
            <input type="password" id="password" placeholder="Password" value="admin123">
            <button onclick="login()" class="btn btn-primary" style="width:100%;margin-top:20px;">Masuk ke Sistem</button>
            <p style="text-align:center;margin-top:15px;color:#666;font-size:12px;">Default: admin / admin123</p>
        </div>
    </div>

    <!-- Main App -->
    <div class="header" id="header" style="display:none;">
        <h1>üèõÔ∏è Kumpulan Girsang Boru Panagolan Tangerang</h1>
        <p>Sistem Informasi Manajemen Lengkap | <span id="roleDisplay"></span> Dashboard</p>
        <div class="close-btn" onclick="logout()" title="Keluar">√ó</div>
    </div>

    <nav class="navbar" id="navbar" style="display:none;">
        <div class="nav-links">
            <a onclick="showSection('dashboard')" class="active">üìä Dashboard</a>
            <a onclick="showSection('members')">üë• Keanggotaan</a>
            <a onclick="showSection('attendance')">üìã Absensi</a>
            <a onclick="showSection('finance')">üí∞ Keuangan</a>
        </div>
    </nav>

    <div class="container">
        <!-- DASHBOARD -->
        <section class="section active" id="dashboard">
            <div class="section-header"><h2>üìä Dashboard Overview</h2></div>
            <div class="section-content">
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-number" id="activeMembers">0</div>
                        <div class="stat-label">Anggota Aktif</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="todayAttendance">0</div>
                        <div class="stat-label">Hadir Hari Ini</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="saldoKas">Rp 0</div>
                        <div class="stat-label">Saldo Kas</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalMembers">0</div>
                        <div class="stat-label">Total Anggota</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- KEANGGOTAAN -->
        <section class="section" id="members">
            <div class="section-header"><h2>üë• Manajemen Keanggotaan</h2></div>
            <div class="section-content">
                <div class="form-grid">
                    <input type="text" id="nama" placeholder="Nama Lengkap *">
                    <input type="text" id="alamat" placeholder="Alamat Lengkap *">
                    <input type="text" id="no_hp" placeholder="No. HP">
                    <input type="email" id="email" placeholder="Email">
                    <input type="text" id="jabatan" placeholder="Jabatan">
                    <input type="date" id="tanggal_lahir">
                    <button onclick="addMember()" class="btn btn-primary">‚ûï Tambah Anggota Baru</button>
                </div>
                <table id="membersTable">
                    <thead><tr><th>ID</th><th>Nama</th><th>Alamat</th><th>HP/Email</th><th>Jabatan</th><th>Status</th><th>Aksi</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- ABSENSI -->
        <section class="section" id="attendance">
            <div class="section-header"><h2>üìã Daftar Hadir</h2></div>
            <div class="section-content">
                <div class="form-grid">
                    <select id="member_id_att">
                        <option value="">Pilih Anggota</option>
                    </select>
                    <input type="date" id="tanggal_att" value="">
                    <select id="status_hadir">
                        <option value="hadir">Hadir</option>
                        <option value="alfa">Alfa</option>
                        <option value="izin">Izin</option>
                        <option value="sakit">Sakit</option>
                    </select>
                    <input type="text" id="keterangan_att" placeholder="Keterangan (opsional)">
                    <button onclick="addAttendance()" class="btn btn-primary">‚úÖ Absen</button>
                </div>
                <h3 style="margin:25px 0 15px 0;">üìä Hadir Hari Ini</h3>
                <table id="attendanceTable">
                    <thead><tr><th>Nama Anggota</th><th>Status</th><th>Waktu</th><th>Keterangan</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- KEUANGAN -->
        <section class="section" id="finance">
            <div class="section-header"><h2>üí∞ Manajemen Keuangan</h2></div>
            <div class="section-content">
                <div class="form-grid">
                    <select id="member_id_fin">
                        <option value="">[Umum/Organisasi]</option>
                    </select>
                    <input type="text" id="deskripsi_fin" placeholder="Deskripsi Transaksi *">
                    <input type="number" id="jumlah_fin" step="0.01" placeholder="Jumlah *">
                    <input type="date" id="tanggal_fin">
                    <select id="jenis_fin">
                        <option value="pemasukan">Pemasukan üí∞</option>
                        <option value="pengeluaran">Pengeluaran üì§</option>
                    </select>
                    <button onclick="addFinance()" class="btn btn-primary">üí∏ Tambah Transaksi</button>
                </div>
                <h3 style="margin:25px 0 15px 0;">üìà 20 Transaksi Terakhir</h3>
                <table id="financeTable">
                    <thead><tr><th>Deskripsi</th><th>Jumlah</th><th>Tanggal</th><th>Jenis</th><th>Anggota</th></tr></thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>
    </div>

    <script>
        // Data Storage
        let members = JSON.parse(localStorage.getItem('girsang_members')) || [];
        let attendance = JSON.parse(localStorage.getItem('girsang_attendance')) || [];
        let finance = JSON.parse(localStorage.getItem('girsang_finance')) || [];
        let loggedIn = localStorage.getItem('girsang_loggedin') === 'true';

        // Login System
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            if(username === 'admin' && password === 'admin123') {
                localStorage.setItem('girsang_loggedin', 'true');
                loggedIn = true;
                document.getElementById('loginOverlay').style.display = 'none';
                document.getElementById('header').style.display = 'block';
                document.getElementById('navbar').style.display = 'block';
                document.getElementById('roleDisplay').textContent = 'Admin';
                loadAllData();
            } else {
                alert('Username/Password salah!');
            }
        }

        function logout() {
            localStorage.setItem('girsang_loggedin', 'false');
            location.reload();
        }

        // Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
            if(sectionId === 'dashboard') loadDashboard();
        }

        // Load Data Functions
        function loadAllData() {
            loadMembers();
            loadAttendanceSelect();
            loadFinanceSelect();
            loadDashboard();
        }

        function loadMembers() {
            const tbody = document.querySelector('#membersTable tbody');
            tbody.innerHTML = '';
            members.forEach((member, index) => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${member.id}</td>
                    <td><strong>${member.nama}</strong></td>
                    <td>${member.alamat?.substring(0,30)}...</td>
                    <td>${member.no_hp || ''} / ${member.email || ''}</td>
                    <td>${member.jabatan || '-'}</td>
                    <td><span class="status-badge status-${member.status}">${member.status}</span></td>
                    <td><button onclick="deleteMember(${member.id})" class="btn btn-danger" style="padding:5px 10px;font-size:12px;">Nonaktif</button></td>
                `;
            });
        }

        function loadAttendanceSelect() {
            const selectAtt = document.getElementById('member_id_att');
            const selectFin = document.getElementById('member_id_fin');
            selectAtt.innerHTML = '<option value="">Pilih Anggota</option>';
            selectFin.innerHTML = '<option value="">[Umum/Organisasi]</option>';
            members.filter(m => m.status === 'aktif').forEach(member => {
                selectAtt.innerHTML += `<option value="${member.id}">${member.nama}</option>`;
                selectFin.innerHTML += `<option value="${member.id}">${member.nama}</option>`;
            });
        }

        function loadDashboard() {
            const today = new Date().toISOString().split('T')[0];
            const todayAtt = attendance.filter(a => a.tanggal === today).length;
            const activeMembers = members.filter(m => m.status === 'aktif').length;
            const totalMembers = members.length;
            const saldo = finance.reduce((sum, f) => 
                f.jenis === 'pemasukan' ? sum + parseFloat(f.jumlah) : sum - parseFloat(f.jumlah), 0);

            document.getElementById('activeMembers').textContent = activeMembers;
            document.getElementById('todayAttendance').textContent = todayAtt;
            document.getElementById('saldoKas').textContent = 'Rp ' + saldo.toLocaleString();
            document.getElementById('totalMembers').textContent = totalMembers;
        }

        // Add Functions
        function addMember() {
            const newMember = {
                id: Date.now(),
                nama: document.getElementById('nama').value,
                alamat: document.getElementById('alamat').value,
                no_hp: document.getElementById('no_hp').value,
                email: document.getElementById('email').value,
                jabatan: document.getElementById('jabatan').value,
                tanggal_lahir: document.getElementById('tanggal_lahir').value,
                status: 'aktif'
            };
            if(!newMember.nama || !newMember.alamat) return alert('Nama & Alamat wajib!');
            members.unshift(newMember);
            localStorage.setItem('girsang_members', JSON.stringify(members));
            loadAllData();
            document.getElementById('nama').value = '';
            alert('Anggota baru berhasil ditambahkan!');
        }

        function addAttendance() {
            const newAtt = {
                id: Date.now(),
                member_id: parseInt(document.getElementById('member_id_att').value),
                tanggal: document.getElementById('tanggal_att').value,
                waktu: new Date().toTimeString().split(' ')[0].substring(0,8),
                status_hadir: document.getElementById('status_hadir').value,
                keterangan: document.getElementById('keterangan_att').value
            };
            if(!newAtt.member_id || !newAtt.tanggal) return alert('Pilih anggota & tanggal!');
            attendance.unshift(newAtt);
            localStorage.setItem('girsang_attendance', JSON.stringify(attendance));
            loadDashboard();
            document.getElementById('member_id_att').value = '';
            alert('Absensi berhasil dicatat!');
        }

        function addFinance() {
            const newFin = {
                id: Date.now(),
                member_id: document.getElementById('member_id_fin').value ? parseInt(document.getElementById('member_id_fin').value) : null,
                deskripsi: document.getElementById('deskripsi_fin').value,
                jumlah: parseFloat(document.getElementById('jumlah_fin').value),
                tanggal: document.getElementById('tanggal_fin').value,
                jenis: document.getElementById('jenis_fin').value
            };
            if(!newFin.deskripsi || !newFin.jumlah || !newFin.tanggal) return alert('Isi semua field wajib!');
            finance.unshift(newFin);
            localStorage.setItem('girsang_finance', JSON.stringify(finance));
            loadDashboard();
            document.getElementById('deskripsi_fin').value = '';
            document.getElementById('jumlah_fin').value = '';
            alert('Transaksi berhasil ditambahkan!');
        }

        function deleteMember(id) {
            if(confirm('Nonaktifkan anggota ini?')) {
                const memberIndex = members.findIndex(m => m.id === id);
                members[memberIndex].status = 'nonaktif';
                localStorage.setItem('girsang_members', JSON.stringify(members));
                loadAllData();
            }
        }

        // Init Dates
        document.getElementById('tanggal_att').value = new Date().toISOString().split('T')[0];
        document.getElementById('tanggal_fin').value = new Date().toISOString().split('T')[0];

        // Auto-login if already logged
        if(loggedIn) {
            document.getElementById('loginOverlay').style.display = 'none';
            document.getElementById('header').style.display = 'block';
            document.getElementById('navbar').style.display = 'block';
            loadAllData();
        }
    </script>
</body>
</html>
